name: 'Terragrunt GitHub Actions'
on:
  - pull_request

jobs:
  example:
    name: Example Terragrunt interaction
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: install Terragrunt
        run: wget https://github.com/gruntwork-io/terragrunt/releases/download/v0.28.2/terragrunt_linux_amd64 && 
             mv terragrunt_linux_amd64 terragrunt &&
             chmod +x terragrunt &&
             sudo mv terragrunt /usr/local/bin/terragrunt
      - name: test
        run: terragrunt --version
      - name: Interact with Terragrunt
        run: terragrunt hclfmt 
      - name: create dummy file
        run: echo "test 3" >> test.txt
      - name: create second dummy file
        run: echo "new test" >> prod/us-east-1/test.txt
      - name: configure github user
        run: git config --global user.email "lucy.lu@homestars.com" && git config --global user.name "lucy lu"
      - name: commit
        run: git add . && git commit -m "Bump version" && git push github HEAD:${GITHUB_REF}
    
    
    
